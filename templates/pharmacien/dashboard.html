{% extends 'base.html' %}
{% load static %}

{% block title %}Tableau de bord Pharmacien{% endblock %}

{% block extra_css %}
<style>
.quick-actions {
    display: flex;
    gap: 1rem;
    margin-bottom: 1.5rem;
}
.quick-action-btn {
    flex: 1;
    padding: 1rem;
    border-radius: 0.5rem;
    background: #f1f3f4;
    border: none;
    font-weight: bold;
    color: #28a745;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer;
    transition: background 0.2s;
    text-decoration: none;
}
.quick-action-btn:hover {
    background: #e9ecef;
}
</style>
{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2>Bonjour {{ pharmacien.nom }}</h2>

  <!-- Actions rapides -->
  <div class="quick-actions">
  </div>

  <div class="row">
    <!-- Bloc prescriptions à traiter -->
    <div class="col-md-6">
      <div class="card mb-3">
        <div class="card-header bg-primary text-white">Prescriptions à traiter</div>
        <div class="card-body">
          <ul class="list-group">
            {% for ordonnance in ordonnances_en_attente %}
              <li class="list-group-item">
                <b>{{ ordonnance.date_heure|date:'d/m/Y H:i' }}</b> — {{ ordonnance.patient.user.get_full_name }}<br>
                <small>{{ ordonnance.medecin.user.get_full_name }}</small>
                <span class="badge bg-warning text-dark">{{ ordonnance.statut }}</span>
              </li>
            {% empty %}
              <li class="list-group-item">Aucune prescription à traiter.</li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
    <!-- Bloc état des stocks -->
    <div class="col-md-6">
      <div class="card mb-3">
        <div class="card-header bg-info text-white">État des stocks</div>
        <div class="card-body">
          <ul class="list-group">
            {% for medicament in stock %}
              <li class="list-group-item">
                <b>{{ medicament.nom }}</b> — Quantité: {{ medicament.quantite }}<br>
                <small>{{ medicament.description }}</small>
              </li>
            {% empty %}
              <li class="list-group-item">Aucun médicament en stock.</li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Bloc notifications -->
  <div class="row">
    <div class="col-md-12">
      <div class="card mb-3">
        <div class="card-header bg-warning text-dark">Notifications</div>
        <div class="card-body">
          <ul class="list-group">
            {% for notif in notifications %}
              <li class="list-group-item">
                <b>{{ notif.date|date:'d/m/Y H:i' }}</b> — {{ notif.message }}
              </li>
            {% empty %}
              <li class="list-group-item">Aucune notification.</li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %} 